<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[[FREE:TITLE:MAIN]]</title>
  <script>
    // 逆順を矯正する
    const params = new URLSearchParams(document.location.search);
    const order = params.get("order");
    if (order !== "reverse") {
      params.append("order", "reverse");
      const redirectTo = location.pathname + "?" + params.toString();
      location.href = redirectTo;
    }
  </script>
  <link href="./style.css?5" rel="stylesheet" />
  [[JS:LIGHTBOX:JQ]]
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css" />
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css" />
</head>

<body>
  <header>
    <a href="/home" class="prev">
      <i class="ph ph-caret-left">prev</i>
    </a>
    <div class="about">
      <h1>[[FREE:TITLE:MAIN]]</h1>
      <span class="description">[[FREE:DESCRIPTION]]</span>
    </div>
    <a href="[[ADMIN:URL]]" class="admin Login-Required">管理画面へ</a>
  </header>
  <main style="visibility: hidden">[[TEGALOG]]</main>
  <footer>
    [[QUICKPOST]]
    <small class="copyright">[[VERSION]]</small>
  </footer>
  <script>
    // 末尾までスクロール
    const element = document.querySelector("main .post:last-child");
    element.scrollIntoView();

    // スクロールが終わってから投稿を表示
    const main = document.querySelector("main");
    main.style.visibility = "";
  </script>
  <script>
    // QUICKPOSTのデザイン調整
    const postform = document.querySelector(".postform");
    document.querySelector(".tegalogpost")?.addEventListener("focus", () => {
      postform?.classList.add("active");
    });
    document.querySelector(".tegalogpost")?.addEventListener("click", () => {
      postform?.classList.add("active");
    });
    document.querySelector("main")?.addEventListener("scroll", () => {
      postform?.classList.remove("active");
    });
    document.querySelector("main")?.addEventListener("click", () => {
      postform?.classList.remove("active");
    });
  </script>
  <script>
    // 投稿ボタンのデザイン変更
    const submitcover = document.querySelector(".submitcover");
    if (submitcover)
      submitcover.innerHTML = `<button type="submit" class="postbutton"><i class="ph-fill ph-paper-plane-right"></i></button>`;
  </script>
</body>

</html>
